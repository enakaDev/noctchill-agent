# README - ノクチル マルチエージェント開発システム

`noctchill-agent` へようこそ！

## 📋 概要

このシステムは、アイドルマスター シャイニーカラーズのユニット「ノクチル」をモチーフにしたAIマルチエージェント開発フレームワークです。

```
プロデューサー（あなた）
    ↓ 「タスクをくれ」
マネージャー（Claude Code）
    ↓ 「〇〇ちゃん、〇〇してくれ」
┌──┬──┬──┬──┐
浅倉透│樋口円香│福丸小糸│市川雛菜（各Claude Code）
```

## 🎯 システムの特徴

- **階層構造**：プロデューサー → マネージャー → 4人のアイドル
- **並列実行**：4人のアイドルが同時にタスク処理
- **YAMLベース通信**：ファイルベースでの指示・報告
- **イベント駆動**：`tmux send-keys` で各エージェントを起動
- **ダッシュボード**：進捗がリアルタイムで可視化

## 📂 ディレクトリ構成

```
noctchill-agent/
├── instructions/          # エージェント用指示書（テンプレート）
│   ├── manager.md        # マネージャーの役割定義
│   ├── asakura.md        # 浅倉 透の役割定義
│   ├── higuchi.md        # 樋口 円香の役割定義
│   ├── fukumaru.md       # 福丸 小糸の役割定義
│   └── ichikawa.md       # 市川 雛菜の役割定義
├── instructions_compiled/ # コンパイル済み指示書（実際に使用）
│   └── （compile_instructions.sh で生成）
├── commu/                # 原作コミュ文字起こし
│   ├── noctchill/        # ノクチル全員登場コミュ
│   ├── asakura/          # 浅倉透メインのコミュ
│   ├── higuchi/          # 樋口円香メインのコミュ
│   ├── fukumaru/         # 福丸小糸メインのコミュ
│   └── ichikawa/         # 市川雛菜メインのコミュ
├── queue/                # タスク・報告ファイル
│   ├── producer_to_manager.yaml  # プロデューサー → マネージャー指示
│   ├── tasks/            # 各アイドル用タスクファイル
│   └── reports/          # 各アイドルからの報告
├── status/               # システム状態
│   └── dashboard.md      # ダッシュボード
├── scripts/              # セットアップ・起動スクリプト
│   └── compile_instructions.sh  # コミュ反映スクリプト
└── README.md            # このファイル
```

## 🚀 クイックスタート

### 前提条件

- WSL2 + Ubuntu（またはLinux/macOS）
- Claude Code がインストール済み
- tmux がインストール済み
- Node.js 16+ （Web ダッシュボード用）

### セットアップ

```bash
# 1. クローンまたはディレクトリに移動
cd /home/shoot/work/noctchill-agent

# 2. 初期化スクリプト実行
bash scripts/setup.sh

# 3. コミュデータを commu/ に追加（任意）
# commu/{idol_name}/ に .md または .txt ファイルを配置

# 4. instructions をコンパイル（コミュを反映）
bash scripts/compile_instructions.sh

# 5. tmux セッション起動
bash scripts/start.sh
```

### コミュデータの追加

原作コミュの文字起こしを追加すると、各アイドルの人格がより原作に近づきます。

```bash
# 例: 透のコミュを追加
echo '透「うん、いいんじゃない」' > commu/asakura/001_example.txt

# コンパイルして反映
bash scripts/compile_instructions.sh
```

詳細は `commu/README.md` を参照してください。

## 📖 使い方

### ステップ1：プロデューサーが指示を出す

`queue/producer_to_manager.yaml` にタスク情報を書き込みます：

```yaml
task_id: "dev_001"
command: "新機能開発"
description: |
  以下のタスクを実行してください：
  1. テストファイル作成
  2. 品質チェック
  3. ドキュメント作成
```

### ステップ2：マネージャーがタスクを受け取る

マネージャー Claude Code が起動し、`producer_to_manager.yaml` を読み込みます。

### ステップ3：マネージャーがタスクを分配

タスクを分析し、各アイドル用のファイルを `queue/tasks/` に作成します：

- `asakura.yaml`
- `higuchi.yaml`
- `fukumaru.yaml`
- `ichikawa.yaml`

### ステップ4：各アイドルがタスク実行

マネージャーから `tmux send-keys` で起動されたアイドルが、各自のタスクを並列で実行します。

### ステップ5：完了報告

各アイドルが `queue/reports/` に報告ファイルを作成します。

### ステップ6：ダッシュボード更新

マネージャーが `status/dashboard.md` を更新し、進捗をリアルタイム表示します。

## 🎨 キャスト紹介

### 浅倉 透（あさはら とおる）
**リーダー気質のアイドル**
- 役割：全体統括、複雑な判断
- 得意分野：チーム調整、品質基準設定
- タスク例：全体進捗確認、トラブルシューティング

### 樋口 円香（ひぐち まどか）
**ムードメーカー**
- 役割：創意工夫、新規提案
- 得意分野：アイデア出し、改善案立案
- タスク例：UI/UXデザイン、機能提案

### 福丸 小糸（ふくまる こいと）
**完璧主義者**
- 役割：品質管理、細部チェック
- 得意分野：テスト、校正、品質判定
- タスク例：品質チェック、ドキュメント校正

### 市川 雛菜（いちかわ ひなな）
**献身的なサポーター**
- 役割：実装、地道な作業
- 得意分野：ドキュメント作成、データ処理
- タスク例：実装業務、ファイル管理

## 📊 ダッシュボード

`status/dashboard.md` をVSCode で Markdown プレビュー表示すると、リアルタイムで進捗が可視化されます。

```markdown
## 現在のタスク

| アイドル | タスク | 状態 | 進捗 |
|---------|-------|------|------|
| 浅倉 透 | xxx | 実行中 | 50% |
| 樋口 円香 | yyy | 完了 | 100% |
| ...
```

## 🔄 ワークフロー全体図

```
1. プロデューサー指示
   ↓
2. マネージャー受け取り
   ↓
3. タスク分解
   ↓
4. 4人同時実行（並列）
   ↓
5. 報告集約
   ↓
6. ダッシュボード更新
   ↓
7. プロデューサーへ報告
```

## ⚠️ 重要ルール

### 🔴 「違反は切腹」ルール

各エージェントは以下を厳守してください：

- **自分のタスクのみ実行**：他のエージェントのタスクを見てはいけない
- **指定されたファイルのみ確認**：自分の YAML ファイルだけを信頼

### tmux send-keys 2回分割ルール

エージェント間通信時、`send-keys` は必ず2回に分けます：

```bash
# ❌ ダメ
tmux send-keys -t multiagent:0.0 "メッセージ" Enter

# ✅ OK
tmux send-keys -t multiagent:0.0 "メッセージ"
tmux send-keys -t multiagent:0.0 Enter
```

## 🛠️ 実装ロードマップ

- [x] 基本ディレクトリ構造作成
- [x] 指示書（instructions）作成
- [ ] tmux セットアップスクリプト
- [ ] マネージャー Claude Code プロンプト
- [ ] 4人のアイドル Claude Code プロンプト
- [ ] ダッシュボード自動更新機能
- [ ] Web ダッシュボード（スマホ対応）
- [ ] テスト・バグフィックス

## 📝 ライセンス

このプロジェクトは個人学習・開発用です。

---

**準備完了！プロデューサーの皆さん、プロジェクト開始準備ができました！**
